{% if message.role == 'user' %}
    <article class="grid grid-cols-[1fr_auto] gap-3 items-start max-w-[85%] justify-self-end">
        <div class="p-3.5 rounded-xl shadow-lg bg-gradient-to-br from-blue-500 to-blue-400 text-white relative">
            <div class="text-[15px] leading-6">{{ message.content|nl2br }}</div>
        </div>
        <div class="w-9 h-9 grid place-items-center bg-green-500 text-white rounded-full shadow-lg text-sm font-semibold flex-shrink-0">{{ user.name|first|upper }}</div>
    </article>
{% else %}
    <article class="grid grid-cols-[auto_1fr] gap-3 items-start max-w-[85%] justify-self-start">
        <div class="w-9 h-9 grid place-items-center bg-blue-500 text-white rounded-full shadow-lg text-sm font-semibold flex-shrink-0">ğŸ¤–</div>
        <div class="p-3.5 rounded-xl shadow-lg bg-white dark:bg-gray-800 border border-gray-200/20 dark:border-gray-600/20 text-gray-900 dark:text-gray-100 relative">
            <div class="text-[15px] leading-6">{{ message.content|nl2br }}</div>
            {% if message.modelUsed %}
                <div class="mt-2 text-xs opacity-70 font-medium">
                    {% if 'haiku' in message.modelUsed|lower %}
                        âš¡ Fast response
                    {% else %}
                        ğŸ§  Detailed response
                    {% endif %}
                </div>
            {% endif %}
        </div>
    </article>
{% endif %}